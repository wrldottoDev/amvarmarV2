{% extends "base.html" %}
{% block content %}
<div class="container py-5" style="max-width: 520px;">
  <h2 class="mb-4">Cambiar contraseña</h2>

  {% if form.errors %}
    <div class="alert alert-danger">
      Revisa los campos y vuelve a intentar.
    </div>
  {% endif %}

  <form method="post" novalidate>
    {% csrf_token %}
    <div class="mb-3">
      <label class="form-label">Contraseña actual</label>
      {{ form.old_password }}
      {% if form.old_password.errors %}
        <div class="text-danger small">{{ form.old_password.errors|striptags }}</div>
      {% endif %}
    </div>
    <div class="mb-3">
      <label class="form-label">Nueva contraseña</label>
      {{ form.new_password1 }}
      {% if form.new_password1.errors %}
        <div class="text-danger small">{{ form.new_password1.errors|striptags }}</div>
      {% endif %}
      {% if form.new_password1.help_text %}
        <div class="form-text">{{ form.new_password1.help_text|safe }}</div>
      {% endif %}
    </div>
    <div class="mb-3">
      <label class="form-label">Confirmar nueva contraseña</label>
      {{ form.new_password2 }}
      {% if form.new_password2.errors %}
        <div class="text-danger small">{{ form.new_password2.errors|striptags }}</div>
      {% endif %}
    </div>

    <button class="btn btn-primary w-100">Guardar</button>
  </form>

  <a class="btn btn-link mt-3" href="{% url 'index' %}">Volver al panel</a>
</div>

<!-- Opcional: añade clases Bootstrap a los inputs si tu base no las pone -->
<script>
  document.querySelectorAll('input[type="password"]').forEach(i => i.classList.add('form-control'));
</script>
{% endblock %}
